{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="relative bg-white overflow-hidden py-16 border-b border-gray-200">
    <div class="absolute inset-0 animate-gradient opacity-10"></div>
    
    <!-- Animated Background Elements -->
    <div class="absolute inset-0 overflow-hidden">
        <div class="absolute top-10 right-10 w-40 h-40 bg-accent rounded-full opacity-5 animate-pulse"></div>
        <div class="absolute bottom-10 left-10 w-56 h-56 bg-accent rounded-full opacity-5 animate-pulse" style="animation-delay: 1s;"></div>
    </div>
    
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center z-10">
        <div class="inline-block mb-4">
            <span class="bg-accent/20 text-accent px-4 py-2 rounded-full text-sm font-semibold border border-accent/30">
                ðŸŽ¯ Premium Trading Signals
            </span>
        </div>
        <h1 class="text-5xl md:text-6xl font-bold text-gray-800 mb-6">
            {% if has_access %}
                <span class="text-accent">Signals Dashboard</span>
            {% else %}
                <span class="text-accent">Upgrade Required</span>
            {% endif %}
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-8">
            {% if has_access %}
                Access your premium trading signals and start profitable trading today
            {% elif show_login_prompt %}
                Sign in to access premium trading signals
            {% else %}
                Upgrade your account to access premium trading signals
            {% endif %}
        </p>
        
        <!-- Quick Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 max-w-3xl mx-auto">
            <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                <div class="text-2xl font-bold text-accent">98%</div>
                <div class="text-xs text-gray-600">Win Rate</div>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                <div class="text-2xl font-bold text-accent">24/7</div>
                <div class="text-xs text-gray-600">Signals</div>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                <div class="text-2xl font-bold text-accent">5K+</div>
                <div class="text-xs text-gray-600">Members</div>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                <div class="text-2xl font-bold text-accent">Real</div>
                <div class="text-xs text-gray-600">Time Data</div>
            </div>
        </div>
    </div>
    
    <!-- Wave Divider -->
    <svg class="absolute bottom-0 left-0 w-full h-20" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M0,120 C300,80 600,100 900,60 L1200,120 L0,120 Z" fill="#f8f9fa" opacity="1">
            <animate attributeName="d" dur="10s" repeatCount="indefinite"
                values="M0,120 C300,80 600,100 900,60 L1200,120 L0,120 Z;
                        M0,120 C400,100 700,80 1000,100 L1200,120 L0,120 Z;
                        M0,120 C300,80 600,100 900,60 L1200,120 L0,120 Z" />
        </path>
    </svg>
</section>

<!-- Main Content -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        {% if has_access %}
            <!-- User has access - show signals dashboard -->
            <div class="text-center mb-12">
                <div class="inline-flex items-center px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-semibold mb-4">
                    <i class="fas fa-check-circle mr-2"></i>
                    Active {{ subscription_name }} Account
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to Your Signals Dashboard</h2>
                <p class="text-gray-600">You have full access to our premium trading signals</p>
            </div>
            
            <!-- Signals content would go here -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-chart-line text-accent mr-3"></i>
                        Live Signals Feed
                    </h3>
                    <p class="text-gray-600">Your trading signals would be displayed here...</p>
                </div>
                
                <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-history text-accent mr-3"></i>
                        Signal History
                    </h3>
                    <p class="text-gray-600">Your signal performance history would be shown here...</p>
                </div>
            </div>
            
            <!-- Live Performance Tracker -->
            <div class="mt-16">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Live Performance Tracker Column -->
                    <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm sticky top-24">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                                <i class="fas fa-chart-line text-accent mr-3"></i>
                                Live Performance
                            </h2>
                            <div class="flex items-center">
                                <span class="relative flex h-3 w-3 mr-2">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                                </span>
                                <span class="text-green-600 text-sm font-semibold">LIVE</span>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <!-- Stat Card 1 -->
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-200 hover:border-accent transition-all duration-300 transform hover:scale-105">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-gray-500 text-sm">Signals Sent Today</span>
                                        <div class="flex items-baseline mt-1">
                                            <span class="text-accent font-bold text-3xl" id="signals-today">12</span>
                                            <span class="text-green-600 text-sm ml-2">+3 â†‘</span>
                                        </div>
                                    </div>
                                    <div class="w-14 h-14 bg-accent/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-bell text-accent text-xl"></i>
                                    </div>
                                </div>
                            </div>
    
                            <!-- Stat Card 2 -->
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-200 hover:border-accent transition-all duration-300 transform hover:scale-105">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-gray-500 text-sm">Accuracy Rate (30 Days)</span>
                                        <div class="flex items-baseline mt-1">
                                            <span class="text-accent font-bold text-3xl" id="accuracy-rate">85</span>
                                            <span class="text-accent font-bold text-2xl">%</span>
                                        </div>
                                        <!-- Progress Bar -->
                                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                            <div id="accuracy-bar" class="bg-accent h-2 rounded-full transition-all duration-500" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    <div class="w-14 h-14 bg-accent/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-bullseye text-accent text-xl"></i>
                                    </div>
                                </div>
                            </div>
    
                            <!-- Stat Card 3 -->
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-200 hover:border-accent transition-all duration-300 transform hover:scale-105">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-gray-500 text-sm">Last Signal Outcome</span>
                                        <div class="flex items-baseline mt-1">
                                            <span class="text-green-600 font-bold text-3xl" id="last-outcome">+15</span>
                                            <span class="text-green-600 text-xl ml-1">pips</span>
                                        </div>
                                    </div>
                                    <div class="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-arrow-trend-up text-green-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
    
                            <!-- Stat Card 4 -->
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-200 hover:border-accent transition-all duration-300 transform hover:scale-105">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <span class="text-gray-500 text-sm">Active Traders</span>
                                        <div class="flex items-baseline mt-1">
                                            <span class="text-accent font-bold text-3xl" id="active-traders">1,247</span>
                                            <span class="text-green-600 text-sm ml-2">+15 â†‘</span>
                                        </div>
                                    </div>
                                    <div class="w-14 h-14 bg-accent/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-users text-accent text-xl"></i>
                                    </div>
                                </div>
                            </div>
    
                            <!-- Recent Signals -->
                            <div class="mt-6 pt-6 border-t border-gray-200">
                                <h3 class="text-gray-800 font-semibold mb-4 flex items-center">
                                    <i class="fas fa-history text-accent mr-2"></i>
                                    Recent Signals
                                </h3>
                                <div class="space-y-3">
                                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <span class="text-gray-800 font-semibold">EUR/USD</span>
                                                <p class="text-xs text-gray-500">Entry: 1.0850</p>
                                            </div>
                                            <span class="text-green-600 font-bold">+22 pips</span>
                                        </div>
                                    </div>
                                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <span class="text-gray-800 font-semibold">GBP/JPY</span>
                                                <p class="text-xs text-gray-500">Entry: 188.50</p>
                                            </div>
                                            <span class="text-green-600 font-bold">+18 pips</span>
                                        </div>
                                    </div>
                                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <span class="text-gray-800 font-semibold">USD/CAD</span>
                                                <p class="text-xs text-gray-500">Entry: 1.3720</p>
                                            </div>
                                            <span class="text-green-600 font-bold">+12 pips</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-center p-4 bg-gray-50 rounded-lg border border-gray-200">
                            <p class="text-gray-500 text-sm flex items-center justify-center">
                                <i class="fas fa-sync-alt text-accent mr-2 animate-spin"></i>
                                Data updates every 3 seconds
                            </p>
                        </div>
                    </div>

                    <!-- Trust Badges -->
                    <div class="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm">
                        <h3 class="text-gray-800 font-semibold mb-4 text-center">Why Traders Trust Us</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-shield-alt text-accent text-2xl mb-2"></i>
                                <p class="text-xs text-gray-600">Secure Payment</p>
                            </div>
                            <div class="text-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-clock text-accent text-2xl mb-2"></i>
                                <p class="text-xs text-gray-600">Instant Access</p>
                            </div>
                            <div class="text-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-undo text-accent text-2xl mb-2"></i>
                                <p class="text-xs text-gray-600">30-Day Refund</p>
                            </div>
                            <div class="text-center p-3 bg-gray-50 rounded-lg">
                                <i class="fas fa-headset text-accent text-2xl mb-2"></i>
                                <p class="text-xs text-gray-600">24/7 Support</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        {% elif show_login_prompt %}
            <!-- User not logged in - show login prompt -->
            <div class="text-center max-w-2xl mx-auto">
                <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-sm">
                    <i class="fas fa-sign-in-alt text-accent text-4xl mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">Sign In Required</h2>
                    <p class="text-gray-600 mb-6">Please log in to your account to access premium trading signals.</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <a href="{% url 'login' %}" class="bg-accent text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                            Sign In
                        </a>
                        <a href="{% url 'signup' %}" class="border-2 border-accent text-accent px-8 py-3 rounded-lg font-semibold hover:bg-accent hover:text-white transition-all duration-300">
                            <i class="fas fa-user-plus mr-2"></i>
                            Create Account
                        </a>
                    </div>
                </div>
            </div>
            
        {% else %}
            <!-- User doesn't have access - show upgrade prompt -->
            <div class="text-center mb-12">
                <div class="inline-flex items-center px-4 py-2 bg-yellow-100 text-yellow-700 rounded-full text-sm font-semibold mb-4">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    {{ current_subscription }} Account
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Upgrade Required</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Your current {{ current_subscription }} account doesn't include access to trading signals. Upgrade your account to unlock premium signals and start profitable trading.</p>
            </div>
            
            <!-- Upgrade Options -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto">
                {% for subscription in available_upgrades %}
                <div class="group bg-white p-6 rounded-2xl border border-gray-200 hover:border-accent transition-all duration-300 transform hover:-translate-y-2 hover:shadow-xl">
                    <div class="text-center">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">{{ subscription.name }}</h3>
                        <div class="text-3xl font-bold text-accent mb-4">
                            {% if subscription.price == 0 %}
                                Free
                            {% else %}
                                ${{ subscription.price }}
                            {% endif %}
                        </div>
                        <ul class="space-y-2 mb-6 text-left">
                            {% for feature in subscription.features.splitlines %}
                            <li class="flex items-center text-sm text-gray-600">
                                <i class="fas fa-check text-accent mr-2"></i>
                                {{ feature }}
                            </li>
                            {% endfor %}
                        </ul>
                        <a href="{% url 'pricing' %}" class="block w-full bg-accent text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300">
                            Upgrade Now
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Current Features -->
            <div class="mt-16 max-w-2xl mx-auto text-center">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">Your Current {{ current_subscription }} Account Includes</h3>
                <div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-sm">
                    <p class="text-gray-600 mb-4">You currently have access to:</p>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="flex items-center text-gray-600">
                            <i class="fas fa-check text-green-400 mr-2"></i>
                            Community Access
                        </div>
                        <div class="flex items-center text-gray-600">
                            <i class="fas fa-times text-red-400 mr-2"></i>
                            Trading Signals
                        </div>
                        <div class="flex items-center text-gray-600">
                            <i class="fas fa-times text-red-400 mr-2"></i>
                            Trading Bots
                        </div>
                        <div class="flex items-center text-gray-600">
                            <i class="fas fa-times text-red-400 mr-2"></i>
                            Classes & Training
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
        
    </div>
</section>

<style>
/* Plan card selection effect */
.plan-card {
    position: relative;
}

.plan-card.selected {
    border-color: #0056b3 !important;
    background: linear-gradient(135deg, rgba(0, 86, 179, 0.1), rgba(0, 86, 179, 0.05));
    transform: scale(1.02);
}

.plan-card.selected .w-6.h-6 {
    border-color: #0056b3 !important;
}

.plan-card.selected .w-3.h-3 {
    opacity: 1 !important;
}

/* Smooth animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.bg-gradient-to-br {
    animation: fadeIn 0.5s ease-out;
}

/* Input focus glow */
input:focus {
    box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.1);
}

/* Card number formatting */
#card_number {
    letter-spacing: 0.05em;
}

/* Smooth scroll */
html {
    scroll-behavior: smooth;
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
    background: #0056b3;
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: #003d82;
}
</style>

{% endblock %}

{% block extra_js %}
<script>
// Signal purchase page specific JavaScript
document.addEventListener('DOMContentLoaded', function() {
    // Live Performance Tracker Updates
    function updateTracker() {
        // Mock data updates with smooth animations
        const signals = Math.floor(Math.random() * 5) + 10;
        const accuracy = Math.floor(Math.random() * 10) + 82;
        const outcomes = [
            { value: 15, color: 'text-green-600' },
            { value: 8, color: 'text-green-600' },
            { value: -5, color: 'text-red-500' },
            { value: 22, color: 'text-green-600' },
            { value: 12, color: 'text-green-600' },
            { value: -3, color: 'text-red-500' },
            { value: 18, color: 'text-green-600' }
        ];
        const outcome = outcomes[Math.floor(Math.random() * outcomes.length)];
        const traders = Math.floor(Math.random() * 50) + 1230;

        // Update with smooth transition
        animateValue('signals-today', parseInt(document.getElementById('signals-today').textContent), signals, 1000);
        animateValue('accuracy-rate', parseInt(document.getElementById('accuracy-rate').textContent), accuracy, 1000);
        animateValue('active-traders', parseInt(document.getElementById('active-traders').textContent.replace(/,/g, '')), traders, 1000);
        
        // Update last outcome
        const outcomeElement = document.getElementById('last-outcome');
        if (outcomeElement) {
            outcomeElement.textContent = (outcome.value > 0 ? '+' : '') + outcome.value;
            outcomeElement.className = outcome.color + ' font-bold text-3xl';
        }
        
        // Update accuracy bar
        const accuracyBar = document.getElementById('accuracy-bar');
        if (accuracyBar) {
            accuracyBar.style.width = accuracy + '%';
        }
    }

    function animateValue(id, start, end, duration) {
        const element = document.getElementById(id);
        if (!element) return;
        
        const range = end - start;
        const increment = range / (duration / 16);
        let current = start;
        
        const timer = setInterval(() => {
            current += increment;
            if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                current = end;
                clearInterval(timer);
            }
            
            if (id === 'active-traders') {
                element.textContent = Math.floor(current).toLocaleString();
            } else {
                element.textContent = Math.floor(current);
            }
        }, 16);
    }

    // Update every 3 seconds
    setInterval(updateTracker, 3000);
    
    // Initial update with slight delay
    setTimeout(updateTracker, 500);

    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe all main sections
    document.querySelectorAll('.space-y-6 > div').forEach((element, index) => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(20px)';
        element.style.transition = `opacity 0.6s ease-out ${index * 0.1}s, transform 0.6s ease-out ${index * 0.1}s`;
        observer.observe(element);
    });

    // Animate live indicator
    const liveIndicator = document.querySelector('.animate-ping');
    if (liveIndicator) {
        setInterval(() => {
            liveIndicator.style.opacity = '0';
            setTimeout(() => {
                liveIndicator.style.opacity = '0.75';
            }, 500);
        }, 2000);
    }

    // Parallax effect on scroll
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const parallaxElements = document.querySelectorAll('.animate-gradient');
        parallaxElements.forEach(element => {
            element.style.transform = `translateY(${scrolled * 0.3}px)`;
        });
    });
});
</script>
{% endblock %}